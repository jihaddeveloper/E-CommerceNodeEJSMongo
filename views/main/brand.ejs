<% layout('layoutPage') -%>

<div class="container" style="width:100%; min-height: 700px">
    <div class="row">
        <div class="col-sm-3 ">
                <h2>Product Filtering</h2>
                <Div class="well">
                    <form action="/products/brands/filter/<%= brand %>" method="POST">
                        <input type="hidden" name="number" value="<%= number %>">
                        <div class="form-group">
                            <label for="brand">Brand</label>
                            <select class="form-control" data-style="btn-info" name="brand" id="brand">
                                <option name="" value="0">Select table</option>
                                <% for ( var i = 0; i < brands.length; i++ ) { %>
                                <option name="<%= brands[i].name %>" value="<%= brands[i]._id %>"><%= brands[i].name %></option>
                                <% } %>
                            </select>
                        </div>
     
                        <div class="form-group">
                            <label for="price">Price Range</label>
                            <select name="price" class="form-control">
                                <option value="0">Select One</option>
                                <option value="0-10001">0 - 10,000</option>
                                <option value="10000-20001">10,000-20,000</option>
                                <option value="20000-30001">20,000-30,000</option>
                                <option value="30000-40001">30,000-40,000</option>
                                <option value="40000-50001">40,000-50,000</option>
                                <option value="50000-60001">50,000-60,000</option>
                                <option value="60000-70001">60,000-70,000</option>
                            </select>
                        </div>
     
                        <% for ( var i = 0; i < dropdown_label.length; i++ ) { %>
                        <div class="form-group">
                            <label for="v<%= i %>"><%= dropdown_label[i].label %></label>
                            <select class="form-control" data-style="btn-info" name="v<%= i %>" class="form-group">
                                <option name="" value="0">Select table</option>
                                  <% for ( var j = 0; j < dropdown_label[i].values.length; j++ ) { %>
                                <option name="<%= dropdown_label[i].values[j] %>" value="<%=  dropdown_label[i].values[j] %>"><%=  dropdown_label[i].values[j] %></option>
                                <% } %> 
                            </select>
     
                        </div>
                        <% } %>
                        <button type="submit" class="btn btn-primary">submit</button>
                    </form>
                </Div>
            </div>
            <div class="col-sm-9 ">
                    <h2>Result</h2>
                    <% if (products.length === 0) { %>
                        <h3> Not found</h3>
                    <% } else { %>
                    <div class="row">       
                        <% for ( var i = 0; i < products[0].length; i++ ) { %>  
                            <div class="col-md-4">
                                <a href="/product/<%= products[0][i]._id %>">
                                    <div class="thumbnail">
                                        <img src="data:image/png;base64, <%= products[0][i].image %>" height="50" width="50">
                                        <div class="caption">
                                            <h3><%= products[0][i].name %></h3>
                                            <p><%= products[0][i].categoryName %></p>
                                            <% if(products[0][i].subcategoryName) {%>
                                                <p><%= products[0][i].subcategoryName %></p>
                                            <% } %>
                                            <p><%= products[0][i].brand.name %></p>
                                            <% if(products[0][i].unitPrice) { %>
                                                <p>$<%= products[0][i].unitPrice %>.00</p>
                                            <% } %>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        <% } %>
                    </div>
                    <% } %>
            </div>
    </div>
    
</div>